<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FinAI Pulse | 全球金融AI动态</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        .glass { background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(10px); }
        [x-cloak] { display: none !important; }
        .line-clamp-3 { overflow: hidden; display: -webkit-box; -webkit-box-orient: vertical; -webkit-line-clamp: 3; }
    </style>
</head>
<body class="bg-slate-50 text-slate-800 font-sans" x-data="appData()">

    <!-- 顶部导航 -->
    <header class="fixed w-full z-50 glass border-b border-slate-200 transition-all duration-300">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center gap-2">
                    <div class="bg-blue-600 text-white p-1.5 rounded-lg">
                        <i class="fa-solid fa-wave-square text-lg"></i>
                    </div>
                    <span class="font-bold text-xl tracking-tight">FinAI <span class="text-blue-600">Pulse</span></span>
                </div>
                <div class="text-xs md:text-sm text-slate-500 bg-slate-100 px-3 py-1 rounded-full">
                    <i class="fa-solid fa-satellite-dish text-green-500 mr-1"></i> 数据更新: <span x-text="lastUpdated"></span>
                </div>
            </div>
        </div>
    </header>

    <!-- 主要内容 -->
    <main class="pt-24 pb-12 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        
        <!-- 过滤器 -->
        <div class="flex flex-wrap gap-2 mb-8">
            <template x-for="cat in categories">
                <button 
                    @click="currentFilter = cat.id"
                    :class="currentFilter === cat.id ? 'bg-blue-600 text-white shadow-md ring-2 ring-blue-200' : 'bg-white text-slate-600 hover:bg-slate-100 border border-slate-200'"
                    class="px-5 py-2 rounded-full text-sm font-medium transition-all duration-200"
                    x-text="cat.name">
                </button>
            </template>
        </div>

        <!-- 这里的 items 就是真正的数据，如果它是空的，说明还没有抓取到 -->
        <div x-show="filteredItems.length === 0" class="text-center py-20 text-slate-400">
            <i class="fa-solid fa-spinner fa-spin text-2xl mb-2"></i>
            <p>正在等待今日数据更新...</p>
        </div>

        <!-- 内容瀑布流 -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            <template x-for="item in filteredItems" :key="item.id">
                <div class="bg-white rounded-xl border border-slate-200 shadow-sm hover:shadow-xl hover:-translate-y-1 transition-all duration-300 cursor-pointer flex flex-col h-full group" @click="openModal(item)">
                    <div class="px-5 pt-5 pb-2 flex justify-between items-center">
                        <span :class="sourceConfig(item.source).class" class="text-[10px] font-bold px-2 py-1 rounded uppercase tracking-wider flex items-center gap-1">
                            <i :class="sourceConfig(item.source).icon"></i>
                            <span x-text="item.source"></span>
                        </span>
                        <span class="text-xs text-slate-400" x-text="item.time"></span>
                    </div>
                    <div class="p-5 flex-1 flex flex-col">
                        <h3 class="font-bold text-lg text-slate-800 mb-3 leading-snug group-hover:text-blue-600 transition-colors line-clamp-3" x-text="item.title"></h3>
                        <div class="bg-slate-50 p-3 rounded-lg border border-slate-100 mb-4 flex-1">
                            <p class="text-sm text-slate-600 line-clamp-3 leading-relaxed" x-text="item.summary"></p>
                        </div>
                    </div>
                </div>
            </template>
        </div>
    </main>

    <!-- 详情模态框 -->
    <div x-show="isModalOpen" x-cloak 
         class="fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm"
         x-transition.opacity>
        <div @click.away="isModalOpen = false" 
             class="bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[85vh] overflow-y-auto relative">
            <button @click="isModalOpen = false" class="absolute top-4 right-4 w-8 h-8 flex items-center justify-center rounded-full bg-slate-100 text-slate-500 hover:bg-slate-200">
                <i class="fa-solid fa-times"></i>
            </button>
            <template x-if="selectedItem">
                <div class="p-8">
                    <div class="flex items-center gap-3 mb-6">
                        <span :class="sourceConfig(selectedItem.source).class" class="text-xs font-bold px-2 py-1 rounded uppercase" x-text="selectedItem.source"></span>
                        <span class="text-slate-400 text-sm" x-text="selectedItem.time"></span>
                    </div>
                    <h2 class="text-2xl font-bold text-slate-900 mb-6 leading-tight" x-text="selectedItem.title"></h2>
                    <div class="bg-blue-50/50 p-6 rounded-xl border border-blue-100 mb-8">
                        <h4 class="text-blue-800 font-bold mb-3">摘要</h4>
                        <p class="text-slate-700 leading-relaxed" x-text="selectedItem.summary"></p>
                    </div>
                    <div class="flex justify-end pt-6 border-t border-slate-100">
                        <a :href="selectedItem.link" target="_blank" class="inline-flex items-center gap-2 bg-slate-900 text-white px-6 py-3 rounded-xl hover:bg-blue-600 transition-colors font-medium shadow-lg">
                            阅读原文 <i class="fa-solid fa-arrow-up-right-from-square text-xs"></i>
                        </a>
                    </div>
                </div>
            </template>
        </div>
    </div>

    <script>
        function appData() {
            return {
                // 下面这一行是关键：Python 会把 {{ITEMS_DATA}} 替换成真实数据
                items: {{ITEMS_DATA}}, 
                
                lastUpdated: '等待更新...',
                currentFilter: 'all',
                isModalOpen: false,
                selectedItem: null,
                categories: [
                    { id: 'all', name: '全部动态' },
                    { id: 'Paper', name: '学术/ArXiv' },
                    { id: 'News', name: '市场新闻' }
                ],
                get filteredItems() {
                    if (this.currentFilter === 'all') return this.items;
                    return this.items.filter(i => i.source === this.currentFilter);
                },
                sourceConfig(source) {
                    const configs = {
                        'Paper': { class: 'bg-red-50 text-red-600 border border-red-100', icon: 'fa-solid fa-graduation-cap' },
                        'News': { class: 'bg-blue-50 text-blue-600 border border-blue-100', icon: 'fa-regular fa-newspaper' }
                    };
                    return configs[source] || { class: 'bg-slate-100 text-slate-600', icon: 'fa-solid fa-link' };
                },
                openModal(item) { this.selectedItem = item; this.isModalOpen = true; document.body.style.overflow = 'hidden'; },
                closeModal() { this.isModalOpen = false; document.body.style.overflow = 'auto'; }
            }
        }
        document.addEventListener('alpine:init', () => { Alpine.watch('isModalOpen', value => { if(!value) document.body.style.overflow = 'auto'; }); });
    </script>
</body>
</html>
